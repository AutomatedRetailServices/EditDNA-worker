# =========================================================
# üé¨ EditDNA.ai Worker Defaults ‚Äî Unified v1.7 (Dec 2025)
# =========================================================

# ---------- Selection / funnel ----------
FUNNEL_COUNTS=2,3,2,1         # ~8 clips ‚Üí ~24‚Äì32s
VETO_MIN_SCORE=0.35           # keep more candidates than 0.40
BIN_SEC=1.0                   # scoring bin size

# ---------- Clip bounds ----------
MIN_TAKE_SEC=1.5
MAX_TAKE_SEC=20
MAX_DURATION_SEC=120          # hard ceiling used by the picker

# ---------- ASR / captions ----------
ASR_ENABLED=1
ASR_MODEL_SIZE=tiny
ASR_LANG=en
CAPTIONS=off                  # off|soft|hard
V2_CAPTIONER=1

# ---------- Render quality (vertical) ----------
FFMPEG_BIN=ffmpeg
FFPROBE_BIN=ffprobe

# =========================================================
# üß† Semantic + Visual Fusion (Continuity Engine)
# =========================================================
W_SEM=1.2
W_FACE=0.8
W_SCENE=0.5
W_VTX=0.8
SEM_DUP_THRESHOLD=0.88
SEM_MERGE_SIM=0.80
VIZ_MERGE_SIM=0.75
MERGE_MAX_CHAIN=3
SEM_FILLER_MAX_RATE=0.08

# Slot rules (optional)
SLOT_REQUIRE_PRODUCT=FEATURE,PROOF
SLOT_REQUIRE_OCR_CTA=CTA

# =========================================================
# ‚òÅÔ∏è Core Runtime (no secrets)
# =========================================================
QUEUE=default
AWS_REGION=us-east-1
S3_BUCKET=script2clipshop-video-automatedretailservices

# =========================================================
# üì¶ Dataset / training paths (Good + Bloopers)
# =========================================================
# Bucket where JSON outputs + training files live
EDITDNA_DATASET_BUCKET=script2clipshop-video-automatedretailservices

# Where all per-video JSONs live (bloopers + GoodX)
EDITDNA_TAKEJUDGE_PREFIX=editdna/outputs/dataset/bloopers/

# Where the merged JSONL dataset is stored
EDITDNA_TAKEJUDGE_DATASET_KEY=editdna/training/take_judge_dataset.jsonl

# Full S3 URI to the merged dataset file
EDITDNA_TAKE_JUDGE_DATASET_S3_URI=s3://script2clipshop-video-automatedretailservices/editdna/training/take_judge_dataset.jsonl

# =========================================================
# ü§ñ Take Judge model (inference)
# =========================================================
# Turn ML take-judge ON (1) or OFF (0)
EDITDNA_TAKE_JUDGE_ENABLED=1

# Trained model file in S3 (joblib you just created)
EDITDNA_TAKE_JUDGE_MODEL_S3_URI=s3://script2clipshop-video-automatedretailservices/editdna/models/take_judge_baseline.joblib

# Score threshold to mark a clip as keep=true (0‚Äì1)
EDITDNA_TAKE_JUDGE_THRESHOLD=0.55
